{"version":3,"sources":["webpack:///./src/app/settings/notification/notification.module.ts","webpack:///./src/app/settings/notification/notification.page.html","webpack:///./src/app/settings/notification/notification.page.scss","webpack:///./src/app/settings/notification/notification.page.ts"],"names":[],"mappings":"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","file":"settings-notification-notification-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicSelectableModule } from 'ionic-selectable';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NotificationPage } from './notification.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NotificationPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    IonicSelectableModule\r\n  ],\r\n  declarations: [NotificationPage]\r\n})\r\nexport class NotificationPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n    <ion-title>\\r\\n      <img alt=\\\"logo\\\" height=\\\"40\\\" src=\\\"assets/logo.png\\\">\\r\\n    </ion-title>\\r\\n\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-list>\\r\\n    <ion-list-header>\\r\\n      <ion-label>Notification Settings</ion-label>\\r\\n    </ion-list-header>\\r\\n    <ion-item>\\r\\n      <ion-label>Alert Tone</ion-label>\\r\\n      <ion-toggle [(ngModel)]=\\\"userInfo.alert_tone\\\" (ionChange)=\\\"myChange($event)\\\"></ion-toggle>\\r\\n    </ion-item>\\r\\n    <ion-item *ngIf=\\\"userInfo.alert_tone\\\" (click)=\\\"selectTone('Cases')\\\">\\r\\n      <ion-label>Select case tone</ion-label>\\r\\n      <ion-note slot=\\\"end\\\">{{theToneCase?.name}}</ion-note>\\r\\n    </ion-item>\\r\\n    <ion-item *ngIf=\\\"userInfo.alert_tone\\\" (click)=\\\"selectTone('Messages')\\\">\\r\\n      <ion-label>Select message tone</ion-label>\\r\\n      <ion-note slot=\\\"end\\\">{{theToneMessage?.name}}</ion-note>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Vibrate</ion-label>\\r\\n      <ion-toggle [(ngModel)]=\\\"userInfo.alert_vibrate\\\" (ionChange)=\\\"myChange($event)\\\"></ion-toggle>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n  <!-- <ion-button (click)=\\\"toneNow()\\\">\\r\\n    Click me - test ringtone\\r\\n  </ion-button>\\r\\n\\r\\n  <ion-button (click)=\\\"vibrateNow()\\\">\\r\\n    Click me - test vibrate\\r\\n  </ion-button> -->\\r\\n\\r\\n  <ion-button (click)=\\\"localNoti()\\\">\\r\\n    Click me - test local noti\\r\\n  </ion-button>\\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NldHRpbmdzL25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24ucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ToastController, PopoverController, AlertController } from '@ionic/angular';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { CommonService } from 'src/app/services/common.service';\r\nimport { Vibration } from '@ionic-native/vibration/ngx';\r\nimport { NativeRingtones } from '@ionic-native/native-ringtones/ngx';\r\nimport { NativeAudio } from '@ionic-native/native-audio/ngx';\r\nimport { File } from '@ionic-native/file/ngx';\r\nimport { FilePath } from '@ionic-native/file-path/ngx';\r\nimport { Media, MediaObject } from '@ionic-native/media/ngx';\r\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\r\nimport { Platform } from '@ionic/angular';\r\nimport { TonesListComponent } from '../tones-list/tones-list.component';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-notification',\r\n  templateUrl: './notification.page.html',\r\n  styleUrls: ['./notification.page.scss']\r\n})\r\nexport class NotificationPage implements OnInit {\r\n  notiSettings: any = {\r\n    tone: true,\r\n    vibrate: true\r\n  };\r\n  toneUrl: any = `${environment.url}/assets/ringtones/tone.mp3`; // assets/ringtones/beep.mp3';\r\n  notifications: any = [];\r\n  tones: any = [];\r\n  userInfo: any = {\r\n    alert_vibrate: true,\r\n    alert_tone: true,\r\n  };\r\n  defaultToneName = 'CuraCall Ringtone';\r\n  defaultTone = {\r\n    Name: this.defaultToneName,\r\n    Url: this.toneUrl,\r\n    name: this.defaultToneName,\r\n    url: this.toneUrl,\r\n    label: this.defaultToneName,\r\n    index: 0,\r\n    value: `${this.defaultToneName}_${this.toneUrl}_0`,\r\n    checked: true\r\n  }\r\n  theToneCase = this.defaultTone;\r\n  theToneMessage = this.defaultTone;\r\n  path: string;\r\n  filee: MediaObject = this.media.create(`${environment.url}/assets/ringtones/tone.mp3`);\r\n\r\n  constructor(\r\n    public toastController: ToastController,\r\n    private vibration: Vibration,\r\n    private file: File,\r\n    private media: Media,\r\n    private filePath: FilePath,\r\n    private nativeAudio: NativeAudio,\r\n    private ringtones: NativeRingtones,\r\n    private localNotifications: LocalNotifications,\r\n    public plt: Platform,\r\n    public commonService: CommonService,\r\n    public userService: UserService,\r\n    public popoverController: PopoverController,\r\n    public alertController: AlertController,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.userInfo = (this.userService.getUserInfo() && Object.keys(this.userService.getUserInfo()).length) ? this.userService.getUserInfo() : this.userInfo;\r\n    console.log(this.toneUrl, this.plt.is('android'), 'this.plt.is');\r\n  }\r\n  \r\n  getNotifications() {\r\n    this.commonService.getNotifications({user_id: this.userInfo.id})\r\n    .subscribe((data: any) => {\r\n      console.log(data, 'ddd');\r\n      this.notifications = data;\r\n    });\r\n  }\r\n  selectTone(type: any){\r\n    this.ringtones.getRingtone().then((ringtones: any) => {\r\n\r\n      ringtones.unshift(this.defaultTone);\r\n\r\n      let mapTones = ringtones.map((item: any, index: number) => {\r\n        let formatted = {\r\n          name: item.Name,\r\n          type: 'radio',\r\n          label: item.Name,\r\n          value: `${item.Name}_${item.Url}_${index}`\r\n        };\r\n        return formatted;\r\n      });\r\n      this.presentAlertRadio(mapTones, type);\r\n\r\n      this.tones = ringtones;\r\n    });\r\n    // this.tones = await this.ringtones.getRingtone();\r\n  }\r\n\r\n  async presentAlertRadio(tones: any, type = 'Messages') {\r\n    const alert = await this.alertController.create({\r\n      header: type,\r\n      inputs: tones,\r\n      // backdropDismiss: false,\r\n      buttons: [\r\n        {\r\n          text: 'Test',\r\n          handler: (data: any) => {\r\n            console.log('Confirm test');\r\n            const newFormat = data.split('_');\r\n            if (newFormat[0] === this.defaultToneName) {\r\n              this.filee.play();\r\n              return false;\r\n            }\r\n            this.ringtones.playRingtone(newFormat[1]);\r\n            return false;\r\n          }\r\n        },\r\n        {\r\n          text: 'Set',\r\n          handler: (data: any) => {\r\n            console.log('Confirm Ok');\r\n            this.filee.pause();\r\n            const newFormat = data.split('_');\r\n            const theValue = {\r\n              Name: newFormat[0],\r\n              Url: newFormat[1],\r\n              name: newFormat[0],\r\n              url: newFormat[1],\r\n              index: newFormat[2],\r\n              label: newFormat[0],\r\n              checked: true,\r\n              value: data\r\n            };\r\n            if (type === 'Cases') {\r\n              this.theToneCase = theValue;\r\n              localStorage.setItem('theToneCase', JSON.stringify(this.theToneCase));\r\n              this.commonService.presentToastWithOptions('Tone for cases set successfully');\r\n            } else {\r\n              this.theToneMessage = theValue;\r\n              localStorage.setItem('theToneMessage', JSON.stringify(this.theToneMessage));\r\n              this.commonService.presentToastWithOptions('Tone for messages set successfully');\r\n            } \r\n            this.commonService.presentAlert(JSON.stringify(this.theToneCase), '', () => {});\r\n\r\n          }\r\n        },\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async dismissClick() {\r\n    await this.popoverController.dismiss();\r\n  }\r\n\r\n  async presentPopover(tones: any) {\r\n    const popover = await this.popoverController.create({\r\n      component: TonesListComponent,\r\n      // event: ev,\r\n      animated: true,\r\n      showBackdrop: true,\r\n      componentProps: {\r\n        tones\r\n      }\r\n    });\r\n    return await popover.present();\r\n  }\r\n\r\n\r\n  localNoti() {\r\n    // Schedule a single notification\r\n    this.localNotifications.schedule({\r\n      id: 1,\r\n      text: 'New CuraCall Message',\r\n      sound: this.plt.is('android') ? 'assets/ringtones/tone.mp3': 'assets/ringtones/tone.caf',\r\n      data: { secret: 'key' }\r\n    });\r\n    this.filee.play();\r\n  }\r\n  \r\n\r\n  toneNow(){\r\n    this.ringtones.getRingtone().then((ringtones: any) => {\r\n      this.commonService.presentAlert(JSON.stringify(ringtones[1]), '', ()=> {});\r\n      console.log(ringtones);\r\n      this.ringtones.playRingtone(ringtones[1].Url).then(()=> {\r\n        this.ringtones.stopRingtone(ringtones[1].Url);\r\n      });\r\n    });\r\n    // this.ringtones.getRingtone();\r\n    // this.ringtones.playRingtone('file://assets/ringtones/beep.mp3');\r\n  }\r\n\r\n  vibrateNow(){\r\n    // Vibrate 2 seconds\r\n    // Pause for 1 second\r\n    // Vibrate for 2 seconds\r\n    // Patterns work on Android and Windows only\r\n    this.vibration.vibrate([2000,1000,2000]);\r\n  }\r\n  \r\n  async presentToast() {\r\n    const toast = await this.toastController.create({\r\n      message: 'Your settings have been saved.',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async presentToastWithOptions() {\r\n    const toast = await this.toastController.create({\r\n      message: 'Your settings have been saved.',\r\n      showCloseButton: true,\r\n      position: 'top',\r\n      closeButtonText: 'Close'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  myChange($event: any) {\r\n    const alert = {\r\n      id: this.userInfo.id,\r\n      alert_tone: this.userInfo.alert_tone ? 1 : 0,\r\n      alert_vibrate: this.userInfo.alert_vibrate ? 1 : 0,\r\n    }\r\n    this.userService.updateAlert(alert)\r\n    .subscribe((user: any) => {\r\n      this.userService.setUserToLocal(user);\r\n      this.commonService.presentToastWithOptions('Your settings have been saved.');\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}